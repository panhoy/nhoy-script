<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="nhoy official website">
    <title>nhoy Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
      :root {
          --bg-color: #fdf6f8;
          --card-bg-color: #ffffff;
          --text-color: #5c5470;
          --border-color: #2d283e;
          --shadow-color: #dcb6ff;
          --placeholder-bg: #f5f3f7;
          --accent-pink: #ffabe7;
          --accent-blue: #a6d8ff;
          --accent-green: #a8e6cf;
      }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          background: linear-gradient(135deg, #000000 40%, hsla(186, 95%, 8%, 0.815) 60%);
          min-height: 100vh;
          color: #333;
      }
      /* Header */
      .header {
          background: rgba(0, 0, 0, 0.9);
          backdrop-filter: blur(10px);
          padding: 15px 20px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          position: sticky;
          top: 0;
          z-index: 100;
          box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
      }
      .logo img {
          width: 45px;
          height: 45px;
          border-radius: 50%;
          border: 2px solid #667eea;
          transition: transform 0.3s ease;
      }
      .logo img:hover { transform: scale(1.1); }
      .menu-btn {
          background: none;
          border: none;
          color: white;
          font-size: 24px;
          cursor: pointer;
          transition: transform 0.3s ease;
      }
      .menu-btn:hover { transform: rotate(90deg); }
      /* Main Container */
      .main-content {
          max-width: 1400px;
          margin: 0 auto;
          padding: 20px;
      }
      /* Hero Banner Slider & General Slider Styles */
      .hero-slider, .hero-slider2 {
          position: relative;
          max-width: 100%;
          margin: 20px auto 40px;
          overflow: hidden;
      }
      .hero-slider {
          max-height: 800px;
          border-radius: 2px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      }
      .slider-wrapper {
          display: flex;
          transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .slide { flex: 0 0 100%; position: relative; }
      .slide img {
          width: 100%;
          height: 400px;
          object-fit: cover;
          display: block;
      }
      .slider-arrow {
          position: absolute;
          top: 50%;
          transform: translateY(-50%);
          background: rgba(255, 255, 255, 0.9);
          color: #333;
          border: none;
          width: 45px;
          height: 45px;
          border-radius: 50%;
          cursor: pointer;
          z-index: 10;
          font-size: 18px;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
      }
      .slider-arrow:hover {
          background: white;
          transform: translateY(-50%) scale(1.1);
      }
      .arrow-left { left: 15px; }
      .arrow-right { right: 15px; }
      /* Custom styles for script slider arrows */
      .hero-slider2 .slider-arrow { background-color: #000000; }
      .hero-slider2 .slider-arrow i { color: #15ff00; }
      .dots-container {
          text-align: center;
          padding: 15px 0;
          position: absolute;
          bottom: -10px;
          width: 100%;
      }
      .dot {
          height: 10px;
          width: 10px;
          margin: 0 5px;
          background-color: rgba(255, 255, 255, 0.5);
          border-radius: 50%;
          display: inline-block;
          cursor: pointer;
          transition: all 0.3s ease;
      }
      .dot.active {
          background-color: white;
          width: 30px;
          border-radius: 5px;
      }
      /* Section Title */
      .section-title {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin: 40px 0 20px;
          padding: 0 10px;
      }
      .section-title h2 {
          font-size: 28px;
          color: white;
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .section-title a {
          color: rgba(255, 255, 255, 0.9);
          text-decoration: none;
          font-size: 14px;
          transition: color 0.3s;
      }
      .section-title a:hover { color: white; }
      /* App Grid */
      .app-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 20px;
          margin-bottom: 40px;
      }
      .app-card {
          background: rgb(255, 255, 255);
          border-radius: 15px;
          padding: 20px;
          display: flex;
          align-items: center;
          gap: 15px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
          cursor: pointer;
      }
      .app-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }
      .app-icon {
          width: 60px;
          height: 60px;
          border-radius: 15px;
          object-fit: cover;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      }
      .app-info h3 {
          font-size: 18px;
          margin-bottom: 5px;
          color: #333;
      }
      .app-info p {
          font-size: 13px;
          color: #666;
      }
      .download-btn {
          background: linear-gradient(135deg, #000000 0%, #000000 100%);
          color: white;
          border: none;
          width: 45px;
          height: 45px;
          border-radius: 50%;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
          margin-left: auto;
      }
      .download-btn:hover {
          transform: scale(1.1);
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      /* Script Slider */
      .hero-slider2 .slider-page { flex: 0 0 100%; min-width: 100%; }
      /* Script Cards */
      .script-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 25px;
          margin-bottom: 40px;
      }
      .hero-slider2 .script-grid { grid-template-columns: repeat(var(--scripts-per-page, 3), 1fr); }
      .script-card {
          background: rgba(255, 255, 255, 0.959);
          border-radius: 20px;
          overflow: hidden;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
      }
      .script-card:hover {
          transform: translateY(-8px);
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      }
      .script-image {
          width: 100%;
          height: 200px;
          object-fit: cover;
      }
      .script-content { padding: 20px; }
      .script-title {
          font-size: 22px;
          margin-bottom: 15px;
          color: #333;
      }
      .key-box {
          background: #f8f9fa;
          border: 2px dashed #dee2e6;
          border-radius: 10px;
          padding: 15px;
          margin-bottom: 15px;
          font-family: 'Courier New', monospace;
          font-size: 13px;
          color: #495057;
          word-wrap: break-word;
          max-height: 100px;
          overflow-y: auto;
      }
      .copy-button {
          width: 100%;
          padding: 12px;
          background: linear-gradient(135deg, #a7a8ac 0%, #1a191b 100%);
          color: white;
          border: none;
          border-radius: 10px;
          cursor: pointer;
          font-size: 15px;
          font-weight: 600;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
      }
      .copy-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      .copy-button.copied {
          background: linear-gradient(135deg, #039625 0%, #03c288 100%);
      }
      /* Modal */
      @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
      @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      .modal-overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          backdrop-filter: blur(5px);
          z-index: 1000;
          align-items: center;
          justify-content: center;
          animation: fadeIn 0.3s ease;
      }
      .modal-overlay.visible { display: flex; }
      .modal-content {
          background: white;
          padding: 30px;
          border-radius: 20px;
          width: 90%;
          max-width: 450px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
          position: relative;
          animation: slideUp 0.3s ease;
          text-align: center;
      }
      .modal-header { text-align: center; margin-bottom: 25px; }
      .modal-header h2 { font-size: 24px; margin-bottom: 8px; color: #333; }
      .modal-header p { color: #666; font-size: 14px; }
      .close-btn {
          position: absolute;
          top: 15px;
          right: 15px;
          background: none;
          border: none;
          font-size: 28px;
          color: #999;
          cursor: pointer;
          transition: color 0.3s;
      }
      .close-btn:hover { color: #333; }
      .modal-app-icon {
          width: 100px;
          height: 100px;
          border-radius: 22px;
          margin: 0 auto 20px;
          display: block;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      }
      .unlock-btn {
          width: 100%;
          padding: 15px;
          background: linear-gradient(135deg, #000000 0%, #202524 100%);
          color: white;
          border: none;
          border-radius: 12px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          margin-top: 20px;
      }
      .unlock-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);
      }
      /* Login Modal */
      .login-overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.85);
          backdrop-filter: blur(8px);
          z-index: 2000;
          align-items: center;
          justify-content: center;
          animation: fadeIn 0.3s ease;
      }
      .login-content {
          background: #ffffff;
          padding: 40px;
          border-radius: 20px;
          width: 90%;
          max-width: 400px;
          box-shadow: 0 10px 50px rgba(0, 0, 0, 0.4);
          text-align: center;
          position: relative;
          animation: slideUp 0.4s ease;
      }
      .login-content h2 { margin-bottom: 25px; font-size: 26px; color: #333; }
      #login-form input {
          width: 100%;
          padding: 15px 15px 15px 45px;
          margin-bottom: 20px;
          border-radius: 10px;
          border: 1px solid #ddd;
          font-size: 16px;
      }
      #login-form .input-container { position: relative; }
      #login-form .input-container i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-75%);
        color: #999;
      }
      #login-form button {
          width: 100%;
          padding: 15px;
          border: none;
          background: linear-gradient(135deg, #000000 0%, #353535 100%);
          color: white;
          border-radius: 10px;
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.3s ease;
      }
      #login-form button:hover {
          transform: translateY(-3px);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      .login-error-message {
          color: #d9534f;
          margin-top: 15px;
          font-size: 14px;
          min-height: 20px;
      }
      /* Footer */
      #footer-contact {
          background-color: #000000;
          color: #f0f0f0;
          padding: 50px 20px;
          margin-top: 30px;
          background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.02) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.02) 50%, rgba(255, 255, 255, 0.02) 75%, transparent 75%, transparent);
          background-size: 30px 30px;
      }
      .footer-content {
          max-width: 1200px;
          margin: 0 auto;
          display: grid;
          grid-template-columns: 1fr;
          gap: 40px;
      }
      .footer-section h3 {
          font-size: 18px;
          margin-bottom: 20px;
          font-weight: bold;
          position: relative;
          padding-bottom: 10px;
      }
      .footer-section h3::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          width: 35px;
          height: 3px;
          background-color: #667eea;
          border-radius: 2px;
      }
      .footer-logo-container {
          display: flex;
          align-items: center;
          margin-bottom: 15px;
          text-decoration: none;
          color: inherit;
      }
      .footer-logo {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          object-fit: cover;
          margin-right: 12px;
          border: 2px solid #667eea;
      }
      .footer-logo-text { font-size: 22px; font-weight: bold; }
      .about-section p { line-height: 1.7; color: #ccc; margin-bottom: 20px; }
      .social-links { display: flex; justify-content: flex-start; gap: 20px; }
      .social-links a {
          display: inline-flex;
          justify-content: center;
          align-items: center;
          width: 40px;
          height: 40px;
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 50%;
          text-decoration: none;
          font-size: 18px;
          transition: background-color 0.3s ease, transform 0.3s ease;
      }
      .social-links a:hover {
          background-color: #667eea;
          transform: translateY(-3px);
      }
      .footer-section ul { list-style: none; padding: 0; margin: 0; }
      .footer-section ul li { margin-bottom: 12px; }
      .footer-section ul a, .contact-info span {
          color: #ccc;
          text-decoration: none;
          transition: color 0.3s ease, padding-left 0.3s ease;
      }
      .footer-section ul a:hover {
          color: #667eea;
          padding-left: 5px;
      }
      .contact-info li { display: flex; align-items: center; }
      .contact-info i { margin-right: 12px; font-size: 16px; width: 20px; text-align: center; }
      /* Responsive Design */
      @media (max-width: 768px) {
          .slide img { height: 250px; }
          .section-title h2 { font-size: 22px; }
          .app-grid, .script-grid { grid-template-columns: 1fr; }
          .hero-slider2 .script-grid { grid-template-columns: 1fr; }
          .slider-arrow { width: 35px; height: 35px; font-size: 14px; }
          .arrow-left { left: 10px; }
          .arrow-right { right: 10px; }
      }
      @media (min-width: 768px) {
          .footer-content { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
      }
      @media (min-width: 1200px) {
          .slide img { height: 500px; }
          .app-grid { grid-template-columns: repeat(2, 1fr); }
          .script-grid { grid-template-columns: repeat(3, 1fr); }
      }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <a href="/">
                <img src="https://i.pinimg.com/736x/17/94/ea/1794ea7f66d326bd3224aac4a33b67e7.jpg" alt="logo">
            </a>
        </div>
        <button class="menu-btn" id="menu-btn-action">
            <i class="fa-solid fa-bars"></i>
        </button>
    </div>

    <div class="main-content">
        <div id="public-content">
            <div class="hero-slider" id="banner-slider">
                <div class="slider-wrapper"></div>
                <button class="slider-arrow arrow-left"><i class="fa-solid fa-chevron-left"></i></button>
                <button class="slider-arrow arrow-right"><i class="fa-solid fa-chevron-right"></i></button>
                <div class="dots-container"></div>
            </div>

            <div class="section-title">
                <h2><i class="fa-solid fa-fire"></i> Roblox Hacks</h2>
                <a href="#">View All <i class="fa-solid fa-arrow-right"></i></a>
            </div>

            <div class="app-grid">
                <div class="app-card" data-app="delta">
                    <img src="https://deltaios-executor.com/Icon.jpg" alt="Delta" class="app-icon">
                    <div class="app-info">
                        <h3>Roblox (Delta)</h3>
                        <p>Premium executor for iOS</p>
                    </div>
                    <button class="download-btn">
                        <i class="fa-solid fa-download"></i>
                    </button>
                </div>
                <div class="app-card" data-app="krnl">
                    <img src="https://krnl-ios.com/unnamed.png" alt="KRNL" class="app-icon">
                    <div class="app-info">
                        <h3>Roblox (KRNL)</h3>
                        <p>Powerful script executor</p>
                    </div>
                    <button class="download-btn">
                        <i class="fa-solid fa-download"></i>
                    </button>
                </div>
            </div>

            <div class="section-title">
                <h2><i class="fa-solid fa-code"></i> Featured Scripts</h2>
                <a href="#">More Scripts <i class="fa-solid fa-arrow-right"></i></a>
            </div>

            <div class="hero-slider2" id="banner-slider2">
                <div class="slider-wrapper" id="script-slider-wrapper"></div>
                <button class="slider-arrow arrow-left" id="script-left"><i class="fa-solid fa-chevron-left"></i></button>
                <button class="slider-arrow arrow-right" id="script-right"><i class="fa-solid fa-chevron-right"></i></button>
                <div class="dots-container" id="script-dots"></div>
            </div>

            <div class="section-title">
                <h2><i class="fa-solid fa-code"></i> Popular Scripts</h2>
                <a href="#">More Scripts <i class="fa-solid fa-arrow-right"></i></a>
            </div>

            <div class="script-grid" id="scripts-container"></div>
            
        </div>
    </div>

    <div class="modal-overlay" id="downloadModal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <div class="modal-header">
                <h2>Ready to Download</h2>
                <p>Your download is prepared</p>
            </div>
            <img src="" alt="App Icon" class="modal-app-icon" id="modal-icon">
            <h3 id="modal-app-name" style="margin-bottom: 8px;"></h3>
            <p>Thanks for your support! Click below to start your download.</p>
            <button class="unlock-btn" id="final-download">
                <i class="fa-solid fa-download"></i>
                <span>Download Now</span>
            </button>
        </div>
    </div>
    
    <div class="login-overlay" id="login-overlay">
        <div class="login-content">
            <button class="close-btn" id="close-login-btn">&times;</button>
            <h2>Admin Login</h2>
            <form id="login-form">
                <div class="input-container">
                    <i class="fa-solid fa-lock"></i>
                    <input type="password" id="password-input" placeholder="Enter Password" required autocomplete="current-password">
                </div>
                <button type="submit">
                    <span id="login-btn-text">Login <i class="fa-solid fa-arrow-right-to-bracket"></i></span>
                </button>
                <p id="login-error" class="login-error-message"></p>
            </form>
        </div>
    </div>

    <footer id="footer-contact">
        <div class="footer-content">
            <div class="footer-section about-section">
                <a href="#" class="footer-logo-container">
                    <img src="https://i.pinimg.com/736x/99/90/d5/9990d5085e3e70c9cd0fb416bc668f59.jpg" alt="nhoy official Logo" class="footer-logo" loading="lazy">
                    <span class="footer-logo-text">nhoy Hub</span>
                </a>
                <p>Your source for esign, Trollstore, and other iOS utilities. Providing free downloads and resources for the community.</p>
                <div class="social-links">
                    <a href="https://nhoy_11.t.me" target="_blank" rel="noopener noreferrer" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                    <a href="https://web.facebook.com/jkj.nha.2025/?rdid=0wBfBtdXtoKp2bqC" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://youtube.com/@xai-qq?si=uPsNoogH7OaNU__O" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-section links-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">ESIGN</a></li>
                    <li><a href="#">Roblox Hack</a></li>
                    <li><a href="#">Troll Store</a></li>
                    <li><a href="#">About</a></li>
                </ul>
            </div>
            <div class="footer-section contact-section">
                <h3>Contact Us</h3>
                <ul class="contact-info">
                    <li><i class="fas fa-envelope"></i> <span>For support, please reach out via our social channels.</span></li>
                    <li><i class="fas fa-info-circle"></i> <span>We do not offer direct phone or email support at this time.</span></li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        const API_BASE = window.location.origin; // Dynamic API base

        const banners = [
            "https://i.pinimg.com/736x/0e/be/63/0ebe63a7b480ea035e83ca3e5e419ad5.jpg",
            "https://i.pinimg.com/1200x/62/5d/af/625daf1f2dccfced38f1a879205653e1.jpg",
            "https://i.pinimg.com/736x/a1/1f/4f/a11f4fb56c576b01a5a1dc1075efb425.jpg"
        ];
        
        const apps = {
            delta: { name: "Roblox (Delta)", icon: "https://deltaios-executor.com/Icon.jpg", url: "itms-services://?action=download-manifest&url=https%3A%2F%2Fdeltaios-executor.com%2FInstall21.plist" },
            krnl: { name: "Roblox (KRNL)", icon: "https://krnl-ios.com/unnamed.png", url: "itms-services://?action=download-manifest&url=https://krnl-ios.com/Install2.plist" }
        };

        let allScripts = [];

        // === DATA FETCHING ===
        async function loadScriptsFromAPI() {
            try {
                const response = await fetch(`${API_BASE}/api/scripts`);
                if (!response.ok) throw new Error("Failed to fetch scripts from API");
                allScripts = await response.json();
            } catch (error) {
                console.error("Error loading scripts:", error);
                allScripts = []; 
            }
        }

        // === TELEGRAM NOTIFICATIONS ===
        async function sendCopyNotification(scriptTitle, scriptKey) {
            try {
                await fetch(`${API_BASE}/api/notify/copy`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        title: scriptTitle, 
                        key: scriptKey,
                        time: new Date().toLocaleString()
                    })
                });
            } catch (error) {
                console.error('Error sending notification:', error);
            }
        }

        // === SLIDER FUNCTIONS ===
        function initializeGenericSlider(sliderId, bannerArray) {
            const slider = document.querySelector(sliderId);
            if (!slider) return;
            
            const sliderWrapper = slider.querySelector('.slider-wrapper');
            const dotsContainer = slider.querySelector('.dots-container');
            let currentSlide = 0;

            sliderWrapper.innerHTML = ''; 
            dotsContainer.innerHTML = '';

            bannerArray.forEach((banner, idx) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.innerHTML = `<img src="${banner}" alt="Banner ${idx + 1}" loading="lazy">`;
                sliderWrapper.appendChild(slide);

                const dot = document.createElement('span');
                dot.className = 'dot';
                dot.addEventListener('click', () => goToSlide(idx));
                dotsContainer.appendChild(dot);
            });

            function updateSlider() {
                if (sliderWrapper && sliderWrapper.style) {
                    sliderWrapper.style.transform = `translateX(-${currentSlide * 100}%)`;
                }
                slider.querySelectorAll('.dot').forEach((dot, idx) => {
                    dot.classList.toggle('active', idx === currentSlide);
                });
            }
            function goToSlide(idx) {
                currentSlide = idx;
                updateSlider();
            }
            slider.querySelector('.arrow-left').addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + bannerArray.length) % bannerArray.length;
                updateSlider();
            });
            slider.querySelector('.arrow-right').addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % bannerArray.length;
                updateSlider();
            });
            setInterval(() => {
                currentSlide = (currentSlide + 1) % bannerArray.length;
                updateSlider();
            }, 5000);
            updateSlider();
        }

        // === SCRIPT RENDERING ===
        function createScriptCard(script) {
            const card = document.createElement('div');
            card.className = 'script-card';
            card.innerHTML = `
                <img src="${script.image}" onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/5c5470/ffffff?text=Image+Not+Found'" alt="${script.title}" class="script-image" loading="lazy">
                <div class="script-content">
                    <h3 class="script-title">${script.title}</h3>
                    <div class="key-box">${script.key}</div>
                    <button class="copy-button">
                        <i class="fa-solid fa-copy"></i>
                        <span>Copy Script</span>
                    </button>
                </div>
            `;
            const copyBtn = card.querySelector('.copy-button');
            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(script.key);
                sendCopyNotification(script.title, script.key); 
                copyBtn.classList.add('copied');
                copyBtn.innerHTML = '<i class="fa-solid fa-check"></i><span>Copied!</span>';
                setTimeout(() => {
                    copyBtn.classList.remove('copied');
                    copyBtn.innerHTML = '<i class="fa-solid fa-copy"></i><span>Copy Script</span>';
                }, 2000);
            });
            return card;
        }

        function renderAllScriptSections() {
            const scriptSliderWrapper = document.getElementById('script-slider-wrapper');
            const scriptDotsContainer = document.getElementById('script-dots');
            const scriptsContainer = document.getElementById('scripts-container');
            let currentScriptSlide = 0;
            let totalScriptPages = 0;

            scriptSliderWrapper.innerHTML = '';
            scriptDotsContainer.innerHTML = '';
            
            scriptsContainer.innerHTML = '';
            allScripts.forEach(script => {
                scriptsContainer.appendChild(createScriptCard(script));
            });

            const scriptsPerPage = window.innerWidth <= 768 ? 1 : (window.innerWidth <= 1200 ? 2 : 3);
            totalScriptPages = Math.ceil(allScripts.length / scriptsPerPage);

            for (let i = 0; i < totalScriptPages; i++) {
                const page = document.createElement('div');
                page.className = 'slider-page';
                const grid = document.createElement('div');
                grid.className = 'script-grid';
                grid.style.setProperty('--scripts-per-page', scriptsPerPage);
                const pageScripts = allScripts.slice(i * scriptsPerPage, (i * scriptsPerPage) + scriptsPerPage);
                pageScripts.forEach(script => grid.appendChild(createScriptCard(script)));
                page.appendChild(grid);
                scriptSliderWrapper.appendChild(page);
                
                const dot = document.createElement('span');
                dot.className = 'dot';
                dot.addEventListener('click', () => goToScriptSlide(i));
                scriptDotsContainer.appendChild(dot);
            }

            function updateScriptSlider() {
                scriptSliderWrapper.style.transform = `translateX(-${currentScriptSlide * 100}%)`;
                document.querySelectorAll('#script-dots .dot').forEach((dot, idx) => {
                    dot.classList.toggle('active', idx === currentScriptSlide);
                });
            }
            function goToScriptSlide(idx) {
                currentScriptSlide = idx;
                updateScriptSlider();
            }
            document.getElementById('script-left').addEventListener('click', () => {
                currentScriptSlide = (currentScriptSlide - 1 + totalScriptPages) % totalScriptPages;
                updateScriptSlider();
            });
            document.getElementById('script-right').addEventListener('click', () => {
                currentScriptSlide = (currentScriptSlide + 1) % totalScriptPages;
                updateScriptSlider();
            });
            if (totalScriptPages > 0) updateScriptSlider();
        }

        // === MODAL & LOGIN ===
        function initializeModalsAndLogin() {
            const modal = document.getElementById('downloadModal');
            const closeBtn = modal.querySelector('.close-btn');

            document.querySelectorAll('.app-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.closest('.download-btn')) {
                        const app = apps[card.dataset.app];
                        document.getElementById('modal-icon').src = app.icon;
                        document.getElementById('modal-app-name').textContent = app.name;
                        document.getElementById('final-download').onclick = () => window.open(app.url, '_blank');
                        modal.classList.add('visible');
                    }
                });
            });
            closeBtn.addEventListener('click', () => modal.classList.remove('visible'));
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('visible'); });

            const loginOverlay = document.getElementById('login-overlay');
            const loginForm = document.getElementById('login-form');
            
            // Menu button: Check backend session, redirect or show login
            document.getElementById('menu-btn-action').addEventListener('click', async () => {
                try {
                    const response = await fetch(`${API_BASE}/api/check-auth`, {
                        credentials: 'include'
                    });
                    const data = await response.json();
                    
                    if (data.authenticated) {
                        window.location.href = `${API_BASE}/admin`;
                    } else {
                        loginOverlay.style.display = 'flex';
                    }
                } catch (error) {
                    console.error('Auth check error:', error);
                    loginOverlay.style.display = 'flex';
                }
            });
            
            const closeLoginModal = () => loginOverlay.style.display = 'none';
            document.getElementById('close-login-btn').addEventListener('click', closeLoginModal);
            loginOverlay.addEventListener('click', (e) => { if(e.target === loginOverlay) closeLoginModal(); });

            // Backend Session Login Handler
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const passwordInput = document.getElementById('password-input');
                const password = passwordInput.value;
                const loginError = document.getElementById('login-error');
                const loginBtn = loginForm.querySelector('button');
                const loginBtnText = document.getElementById('login-btn-text');
                
                loginError.textContent = ''; 
                loginBtnText.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Logging in...';
                loginBtn.disabled = true;

                try {
                    const response = await fetch(`${API_BASE}/api/login`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({ password })
                    });
                    const result = await response.json();
                    
                    if (result.success) {
                        loginBtnText.innerHTML = '<i class="fa-solid fa-check"></i> Success! Redirecting...';
                        setTimeout(() => {
                            window.location.href = `${API_BASE}/admin`;
                        }, 500);
                    } else {
                        loginError.textContent = result.message || 'Incorrect password.';
                        loginBtnText.innerHTML = 'Login <i class="fa-solid fa-arrow-right-to-bracket"></i>';
                        loginBtn.disabled = false;
                        passwordInput.value = '';
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    loginError.textContent = 'Connection error. Check backend server.';
                    loginBtnText.innerHTML = 'Login <i class="fa-solid fa-arrow-right-to-bracket"></i>';
                    loginBtn.disabled = false;
                }
            });
        }

        // === INITIAL LOAD ===
        async function initialLoad() {
            await loadScriptsFromAPI();
            renderAllScriptSections();
            initializeGenericSlider('#banner-slider', banners);
            initializeModalsAndLogin();

            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(renderAllScriptSections, 250);
            });
        }
        
        document.addEventListener('DOMContentLoaded', initialLoad);
    </script>
</body>
</html>